# 경제지표 개편 계획 (확정본)

> **작성일**: 2026-02-19
> **최종 수정**: 2026-02-19
> **상태**: ✅ Phase 1~5 및 후속 보완 완료
> **목표**: 지표 축소 + 흐름 섹션 도입 + 사이클 시스템 대체

---

## 1. 확정된 결정 사항

### 1.1 전환 방식
- **Option B 채택**: 기존 구조 유지 + 흐름 섹션 추가
- 기존 `IndicatorGrid`, `IndicatorChartPanel` 재사용
- `CyclePanel` → `FlowDashboard`로 대체

### 1.2 지표 처리
- **필수 지표만 카드 표시** (카테고리별 4-6개)
- **삭제 지표는 링크 섹션으로** (접힘/펼침, 카테고리별 그룹핑)

### 1.3 카테고리 확장
- 기존 5개 → **7개 카테고리**
- 경기, 고용, 물가, 금리, 무역, **신용**, **심리**

### 1.4 사이클 시스템 처리
- **점수 시스템 삭제** (0-100점, MMC, 국면 판별)
- **유용한 계산 로직만 흡수** (실질금리, 역전 지속기간, 급변 탐지)

### 1.5 AI 브리핑
- **카테고리별 + 종합** 둘 다
- **지표 업데이트마다** 생성
- 금리 시사점 **항상 표시**

---

## 2. 흐름 섹션 설계 (FlowDashboard)

### 2.1 UI 구조: 하이브리드

#### 상단: 컴팩트 요약 (항상 표시)
```
┌──────┬──────┬──────┬──────┬──────┬──────┬──────┐
│ 경기  │ 고용 │ 물가 │ 금리 │ 무역 │ 신용 │ 심리 │
│ ▼수축 │ →유지│ ▼둔화│ →동결│ ↑강세│ →안정│ ▲공포│
│ -1.2  │ +130K│ 2.8% │ 4.5% │ DXY↑│ HY정상│VIX 22│
└──────┴──────┴──────┴──────┴──────┴──────┴──────┘
```

#### 펼침 시: 상세 해석
```
┌────────────────────────────────────────────────────┐
│ 📊 경기                                            │
│ "경제가 뜨거워지고 있는가, 식고 있는가?"              │
├────────────────────────────────────────────────────┤
│ 상태: 수축 진입 ▼ (PMI 48.5)                        │
│ 속도: 둔화 중 → (전월 대비 -1.2)                    │
│ 주체: 제조업 ▼ / 서비스업 ▲                         │
│ ⚡ 턴어라운드 조짐 (가속도 양수)                     │
├────────────────────────────────────────────────────┤
│ 💰 금리 시사점: 급하게 올릴 상황은 아님              │
├────────────────────────────────────────────────────┤
│ 🤖 AI: "확장 중이지만 속도 둔화, 금리 인상 압력 낮음" │
└────────────────────────────────────────────────────┘
```

### 2.2 카테고리별 핵심 질문 (한 줄 논지)

| 카테고리 | 핵심 질문 |
|---------|----------|
| 경기 | 경제가 뜨거워지고 있는가, 식고 있는가? |
| 고용 | 사람들이 돈 벌 기회가 늘고 있는가, 줄고 있는가? |
| 물가 | 돈의 가치가 얼마나 빨리 떨어지고 있는가? |
| 금리 | 돈의 가격이 어떻게 되고 있는가? |
| 무역 | 미국으로 달러가 들어오고 있는가, 나가고 있는가? |
| 신용 | 돈이 잘 돌고 있는가, 막히고 있는가? |
| 심리 | 시장이 두려워하는가, 탐욕스러운가? |

### 2.3 금리 시사점 (모든 카테고리에 표시)

각 카테고리 해석 후 반드시 금리와 연결:
```
경기 강함 → 금리 상승 압력 → 성장주 부담
경기 약함 → 금리 하락 기대 → 성장주 우호

고용 강함 → 금리 유지/상승 → 성장주 부담
고용 둔화 → 금리 인하 기대 → 성장주 우호

물가 상승 → 금리 유지/상승
물가 둔화 → 금리 인하 가능

달러 강세 → 원자재↓ 신흥국↓
달러 약세 → 원자재↑ 신흥국↑
```

---

## 3. 방향성 표시 기준 (정교한 버전)

### 3.1 Layer 1: Level (현재 수준) - 5단계

| 지표 | 강한수축 | 수축 | 중립 | 확장 | 강한확장 |
|-----|---------|-----|-----|-----|---------|
| PMI | <45 | 45-48 | 48-52 | 52-55 | >55 |
| NFP | <0K | 0-100K | 100-150K | 150-250K | >250K |
| 실업률 | >6% | 5-6% | 4-5% | 3.5-4% | <3.5% |
| CPI MoM | >0.5% | 0.3-0.5% | 0.2-0.3% | 0.1-0.2% | <0.1% |
| Core CPI YoY | >4% | 3-4% | 2.5-3% | 2-2.5% | <2% |
| VIX | >30 | 25-30 | 18-25 | 12-18 | <12 |
| HY Spread | >600bp | 400-600bp | 250-400bp | 150-250bp | <150bp |

### 3.2 Layer 2: Trend (속도) - 5단계

전월 대비 변화율 기준:
```
▲▲ 강한 가속: +10% 이상
▲  가속: +3~10%
→  유지: ±3%
▼  감속: -3~10%
▼▼ 강한 감속: -10% 이상
```

### 3.3 Layer 3: Velocity (가속도) - 선택적

속도의 변화 (2차 미분):
- 감속하다가 둔화 멈춤 → "⚡ 턴어라운드 조짐"
- 확장하다가 가속도 감소 → "⚠️ 고점 접근"

### 3.4 종합 표시 예시
```
경기: 수축 ▼ (PMI 48.5)
     속도 둔화 중 → (전월 대비 -1.2)
     ⚡ 턴어라운드 조짐 (가속도 양수)
```

---

## 4. 사이클 시스템에서 흡수할 기능

### 4.1 실질금리 계산 (금리 카테고리)

```python
실질금리 = 명목금리(FFR or 10Y) - Core CPI

표시:
  < 0%: "부양적 💚" (돈이 실제로 쌈)
  0~1.5%: "중립 ⚪"
  > 1.5%: "억제적 🔴" (돈이 실제로 비쌈)
```

### 4.2 역전 지속기간 (금리 카테고리)

```python
역전_개월수 = 10Y-2Y < 0 인 연속 개월 수

표시:
  0개월: "정상 ✓"
  1-2개월: "경계 ⚠️"
  3-5개월: "위험 🔴"
  6개월+: "침체 확률 높음 🚨"

현재 역전 중이면: "현재 역전 중 ⚠️ (N개월째)"
```

### 4.3 스프레드 급변 탐지 (신용 카테고리)

```python
Δ1M = 현재 스프레드 - 1개월 전 스프레드

HY/IG Spread:
  |Δ1M| < 50bp: "안정"
  50bp ≤ |Δ1M| < 100bp: "경계 ⚠️"
  |Δ1M| ≥ 100bp: "급변 🔴"

VIX:
  |Δ1M| < 5: "안정"
  5 ≤ |Δ1M| < 10: "경계 ⚠️"
  |Δ1M| ≥ 10: "급변 🔴"
```

### 4.4 삭제할 기능

- ❌ 0-100점 점수화
- ❌ Level Score + Trend Score 가중 합산
- ❌ MMC (Master Market Cycle) 종합 점수
- ❌ 50/30/20 가중치
- ❌ 5단계 국면 판별 (강한확장기~공포바닥)
- ❌ 규칙 기반 투자 추천 문구

---

## 5. 삭제 지표 섹션

### 5.1 구조

```
📋 추가 지표 (접힘/펼침)
├─ 경기 (4개)
│   ├─ 산업생산 [링크]
│   ├─ CB 소비자신뢰 [링크]
│   ├─ OECD CLI [링크]
│   └─ LEI [링크]
├─ 고용 (2개)
│   ├─ 인구증가율 [링크]
│   └─ ...
├─ 물가 (3개)
│   └─ ...
└─ ...
```

### 5.2 링크 매핑

각 지표는 현재 크롤링 소스 URL로 링크:
- Investing.com 지표: `https://www.investing.com/economic-calendar/{indicator-id}`
- FRED 지표: `https://fred.stlouisfed.org/series/{series-id}`

### 5.3 기본 상태

- 기본: 접힘
- 클릭 시 펼침
- 카테고리별 그룹핑

---

## 6. AI 브리핑 설계

### 6.1 생성 주기

- **트리거**: 지표 업데이트될 때마다
- **저장**: DB에 캐싱 (같은 데이터면 재생성 안 함)

### 6.2 브리핑 종류

#### A. 카테고리별 브리핑 (7개)
```
경기: "확장 중이지만 속도 둔화, 금리 인상 압력 낮음"
고용: "고용 둔화 시작, 임금은 여전히 높아 인하 어려움"
물가: "Core 여전히 높아 연준 신중할 것"
금리: "동결 기조, 시장은 인하 기대 중"
무역: "달러 강세 지속, 신흥국 부담"
신용: "스프레드 안정, 유동성 우려 없음"
심리: "VIX 상승 중, 단기 조정 가능성"
```

#### B. 종합 브리핑 (1개)
```
"경기 둔화 + 물가 안정 조합 → 연준 인하 가능성 ↑
단, 고용이 아직 강해 속도는 느릴 것.
달러 강세 지속으로 신흥국/원자재 부담.
VIX 상승은 단기 조정 신호, 중기적으로 매수 기회 탐색."
```

#### C. 사이클 맥락 (종합 브리핑에 포함)

**역할 분리**:
- **흐름 섹션** = 매주 보는 "날씨" (Tactical, 단기)
- **사이클 맥락** = 분기마다 확인하는 "계절" (Strategic, 중기 3-10년)

**사이클 맥락 예시**:
```
[사이클 위치]
• 거시경제: 확장 후반 (2020 저점 이후 6년차, 평균 주기 7-10년)
• 신용: 안정 but 콤플레이슨시 경고 (스프레드 역사적 저점 근처)
• 심리: 낙관~과열 경계 (CAPE 32-35)

[역사적 참고]
이 조합은 2018년 후반~2019년 초와 유사
→ "조심스러운 낙관" 구간
→ 공격적 추가 매수보다 리밸런싱/현금 확보 고려

[다음 사이클 저점 예상]
• 거시경제 침체: 2027-2030년
• 신용 스트레스: 2025-2027년
• 심리 공포 극단: 2026-2028년
```

**3대 사이클 정의**:
| 사이클 | 평균 주기 | 핵심 질문 |
|--------|---------|----------|
| 거시경제 | 7-10년 | 경기가 확장/수축 어느 단계? |
| 신용/유동성 | 3-5년 | 돈이 잘 돌고 있나? 경색 조짐? |
| 심리/밸류 | 2-4년 | 시장이 공포/탐욕 어느 극단? |

**갱신 주기**: 분기 1회 (또는 주요 이벤트 발생 시)

### 6.3 브리핑 내용 구조

1. **핵심 한 줄**: 현재 상태 요약
2. **금리 시사점**: 연준 정책 방향
3. **자산 영향**: 주식/채권/원자재/신흥국 시사점
4. **사이클 맥락**: 중기 위치 및 역사적 참고 (종합 브리핑에만)

### 6.4 API 엔드포인트

```
POST /api/v2/generate-briefing
  - 지표 업데이트 후 호출
  - 카테고리별 + 종합 브리핑 생성

GET /api/v2/briefing
  - 최신 브리핑 조회
  - 캐싱된 결과 반환
```

---

## 7. 카테고리별 필수 지표 (확정)

### 7.1 경기 (Growth) - 4+1개
| 지표 | ID | 역할 |
|-----|-----|-----|
| ISM 제조업 PMI | ism-manufacturing | 필수 |
| ISM 서비스업 PMI | ism-services | 필수 |
| 소매판매 MoM | retail-sales | 필수 |
| 미시간 소비자심리 | michigan-sentiment | 필수 |
| GDP QoQ | gdp | 선택 |

### 7.2 고용 (Labor) - 4+1개
| 지표 | ID | 역할 |
|-----|-----|-----|
| 비농업고용 NFP | nonfarm-payrolls | 필수 |
| 실업률 | unemployment-rate | 필수 |
| 평균시간당임금 | avg-hourly-earnings | 필수 |
| 신규실업수당청구 | initial-jobless-claims | 필수 |
| 경제활동참가율 | labor-force-participation | 선택 |

### 7.3 금리 (Rates) - 5개
| 지표 | ID | 역할 |
|-----|-----|-----|
| Federal Funds Rate | federal-funds-rate | 필수 |
| 2Y Treasury | 2y-treasury | 필수 |
| 10Y Treasury | 10y-treasury | 필수 |
| 10Y-2Y Spread | yield-curve-10y-2y | 필수 |
| 10Y Real Yield | real-yield-tips | 필수 |

### 7.4 물가 (Inflation) - 5+2개
| 지표 | ID | 역할 |
|-----|-----|-----|
| Core CPI MoM | core-cpi-mom | 필수 |
| Core PCE YoY | core-pce | 필수 |
| 5Y Breakeven | 5y-breakeven | 필수 |
| Brent 유가 | brent | 필수 |
| CRB Index | crb-index | 필수 |
| Core PPI MoM | core-ppi | 선택 |
| 미시간 기대인플레 | michigan-inflation-expectations | 선택 |

### 7.5 무역 (Trade) - 6개
| 지표 | ID | 역할 |
|-----|-----|-----|
| DXY 달러인덱스 | dxy | 필수 |
| USD/KRW | usd-krw | 필수 |
| 상품무역수지 | goods-trade-balance | 필수 |
| Inventory-to-Sales | inventory-sales-ratio | 필수 |
| GSCPI 공급망압력 | gscpi | 필수 |
| Baltic Dry Index | baltic-dry-index | 필수 |

### 7.6 신용 (Credit) - 4+2개
| 지표 | ID | 역할 |
|-----|-----|-----|
| HY OAS | hy-oas | 필수 |
| IG OAS | ig-oas | 필수 |
| BBB-10Y Spread | bbb-10y-spread | 필수 |
| 10Y-2Y (커브) | yield-curve-10y-2y | 필수 (금리와 공유) |
| SLOOS | sloos | 선택 |
| 연체율 | delinquency-rate | 선택 |

### 7.7 심리 (Sentiment) - 4+2개
| 지표 | ID | 역할 |
|-----|-----|-----|
| VIX | vix | 필수 |
| VIX Term Structure | vix-term-structure | 필수 |
| Put/Call Ratio | put-call-ratio | 필수 |
| AAII Bull-Bear | aaii-sentiment | 필수 |
| NAAIM Exposure | naaim | 선택 |
| Fear & Greed | fear-greed | 선택 |

---

## 8. 신용/심리 흐름 해석 (신규 작성)

### 8.1 신용 (Credit) 흐름

**핵심 질문**: "돈이 잘 돌고 있는가? 신용이 막히고 있는가?"

**4가지 체크포인트**:
1. **스프레드 수준**: HY/IG 스프레드가 확대 중인가?
   - 스프레드 축소 → 리스크 선호, 유동성 풍부
   - 스프레드 확대 → 리스크 회피, 유동성 우려
2. **스프레드 속도**: 급변하고 있는가?
   - Δ1M > 50bp → 경계
   - Δ1M > 100bp → 위험
3. **커브 상태**: 역전이 지속되고 있는가?
   - 역전 지속 → 경기 침체 경고
4. **대출 기준**: 은행이 대출을 조이고 있는가?
   - SLOOS 기준 강화 → 신용 경색 시작

**금리 시사점**:
```
신용 경색 → 연준 유동성 공급 → 금리 인하 가능
신용 풍부 → 연준 긴축 여력 → 금리 유지/인상
```

### 8.2 심리 (Sentiment) 흐름

**핵심 질문**: "시장이 두려워하는가? 탐욕스러운가?"

**4가지 체크포인트**:
1. **공포 수준**: VIX가 높은가?
   - VIX > 30 → 극심한 공포 (역발상 매수 기회)
   - VIX < 15 → 과도한 낙관 (조정 주의)
2. **공포 구조**: 단기 vs 장기 공포
   - VIX > VIX3M → 단기 공포 급등 (일시적)
   - VIX < VIX3M → 구조적 안정
3. **옵션 시장**: 풋/콜 비율
   - P/C > 1.0 → 헤지 수요 높음 (공포)
   - P/C < 0.7 → 콜 과열 (탐욕)
4. **투자자 심리**: 설문 기반
   - AAII Bull-Bear 스프레드 > 20 → 과열
   - AAII Bull-Bear 스프레드 < -20 → 공포

**금리 시사점**:
```
극심한 공포 → 연준 개입 가능성 → 금리 인하 기대
과도한 탐욕 → 연준 경계 → 금리 유지
```

---

## 9. 구현 Phase (X 작업용)

### Phase 1: 지표 필터링 ✅ 완료 (d5a2b8d)
- [x] `indicators_config.py`에 `is_core: true/false` 필드 추가
- [x] 카테고리별 필수/선택 지표 플래그 설정
- [x] `IndicatorGrid`에서 `is_core=true`만 카드 표시
- [x] 삭제 지표 섹션 컴포넌트 생성 (`RemovedIndicatorsSection`)
  - 접힘/펼침 UI
  - 카테고리별 그룹핑
  - 크롤링 소스 링크

### Phase 2: FlowDashboard 컴포넌트 ✅ 완료
- [x] `FlowDashboard.tsx` 생성
- [x] 7개 카테고리 컴팩트 카드 (상단)
- [x] 펼침 시 상세 해석 패널
- [x] 방향성 계산 로직 (`flowCalculator.ts`)
  - Level 판단 (5단계)
  - Trend 계산 (전월 대비)
  - Velocity 계산 (선택적)
- [x] 금리 시사점 항상 표시

### Phase 3: 사이클 로직 흡수 ✅ 완료 (4b4589f)
- [x] 실질금리 계산 추가 (금리 카테고리)
- [x] 역전 지속기간 계산 추가 (금리 카테고리)
- [x] 스프레드 급변 탐지 추가 (신용 카테고리)
- [x] 기존 `CyclePanel` 제거
- [x] `cycleCalculator.ts` 정리 (필요한 함수만 `flowCalculator.ts`로 이동)

### Phase 4: AI 브리핑 ✅ 완료 (3d3f834, b5c0466)
- [x] 백엔드: `/api/v2/generate-briefing` 엔드포인트
- [x] 백엔드: `/api/v2/briefing` 조회 엔드포인트
- [x] 프론트: 브리핑 표시 UI (FlowDashboard 내)
- [x] 브리핑 캐싱 로직
- [x] **사이클 맥락 포함** (종합 브리핑에)
  - 3대 사이클 위치 판단 로직 (거시/신용/심리)
  - 역사적 참고 문구 생성
  - 다음 사이클 저점 예상 표시
  - 갱신 주기: 분기 1회 (또는 수동 트리거)

### Phase 5: 정리 및 테스트 ✅ 완료
- [x] 사용하지 않는 코드 제거
- [x] 타입 정의 정리
- [x] 빌드 테스트
- [x] 문서 업데이트

### Post-Phase 보완 ✅ 완료
- [x] 지표 업데이트 기본 모드를 `remaining_only`로 전환 (남은 지표만 갱신)
- [x] AI 브리핑 API 404/HTML 응답 fallback 처리 (레거시 AI 해석 API 연동)
- [x] 경제지표 한눈에보기 레이아웃 정리 (중복 제목 제거, 상태요약 내장)
- [x] 상태요약 집계를 core 카드 지표 기준으로 변경
- [x] 중요 지표 발표 캘린더(접힘 기본) 추가

---

## 10. 파일 변경 목록 (실제)

### 백엔드
```
backend/
├─ config/
│   └─ indicators_config.py    # is_core 필드 추가
├─ services/
│   └─ briefing_service.py     # 신규: AI 브리핑 생성
└─ app.py                      # 브리핑 엔드포인트/remaining update 모드 추가
```

### 프론트엔드
```
frontend/src/
├─ components/
│   ├─ FlowDashboard.tsx           # 신규: 흐름 대시보드
│   ├─ FlowCategoryCard.tsx        # 신규: 카테고리 컴팩트 카드
│   ├─ FlowDetailPanel.tsx         # 신규: 상세 해석 패널
│   ├─ RemovedIndicatorsSection.tsx # 신규: 삭제 지표 링크
│   ├─ AIBriefing.tsx              # 신규: AI 브리핑 표시
│   ├─ IndicatorReleaseCalendar.tsx # 신규: 중요 지표 발표 캘린더
│   └─ CyclePanel.tsx              # 삭제 완료
├─ utils/
│   ├─ flowCalculator.ts           # 신규: 방향성 계산
│   └─ cycleCalculator.ts          # 삭제 완료
└─ app/indicators/page.tsx         # FlowDashboard/브리핑/캘린더 통합
```

---

## 11. 완료 커밋 요약

- `d5a2b8d`: Phase 1 core indicator filtering + removed links section
- `5799965`: `is_core` 누락 시 프론트 fallback 매핑
- `7c62a67`: Phase 2 FlowDashboard + 카테고리 전용 뷰
- `4b4589f`: Phase 3 사이클 로직 흡수 + cycle 파일 제거
- `3d3f834`: Phase 4 briefing service + UI 연동
- `b5c0466`: remaining-only 업데이트 + 브리핑 404 fallback
- `1c20e3e`: Phase 5 정리/테스트/문서 동기화
- `3706b14`: 경제지표 한눈에보기 섹션 UI 구조 정리 + core 상태요약
- `572415d`: 중요 지표 발표 캘린더(접힘 기본) 추가

## 12. 참고 문서

- `docs/지표흐름.md` - 카테고리별 해석 가이드 (임시 참고용)
- `docs/CYCLE_SYSTEM_ARCHITECTURE.md` - 기존 사이클 시스템 (로직 흡수 참고)
- `docs/INDICATOR_INTERPRETATION_SYSTEM.md` - 기존 해석 시스템

---

**Last Updated**: 2026-02-19
**Status**: ✅ 전 Phase + 후속 보완 완료
**Next Action**: 운영/품질 개선 이슈 단위 유지보수
