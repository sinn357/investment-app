# κ°€κ³„λ¶€/μ§€μ¶κ΄€λ¦¬ μ‹μ¤ν… κµ¬ν„ κ³„ν

## κ°μ”
ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬ μ‹μ¤ν…μ μ•„ν‚¤ν…μ²μ™€ ν¨ν„΄μ„ μ¬μ‚¬μ©ν•μ—¬ μ™„μ „ν• κ°€κ³„λ¶€/μ§€μ¶κ΄€λ¦¬ μ‹μ¤ν… κµ¬ν„

## μ‹μ¤ν… μ•„ν‚¤ν…μ²

### λ°μ΄ν„° νλ¦„
```mermaid
graph LR
    A[κ±°λ μ…λ ¥] --> B[React Form]
    B --> C[Flask API]
    C --> D[PostgreSQL DB]
    D --> E[κ°€κ³„λ¶€ λ€μ‹λ³΄λ“]
    E --> F[μμ‚° κ΄€λ¦¬]
    F --> G[ν†µκ³„ λ¶„μ„]
```

### κΈ°μ  μ¤νƒ
- **Frontend**: Next.js 15.5.3, React, Tailwind CSS, Recharts
- **Backend**: Python Flask, PostgreSQL (Neon.tech)
- **State Management**: React useState
- **API Communication**: Fetch API
- **ν¨ν„΄ μ¬μ‚¬μ©**: ν¬νΈν΄λ¦¬μ¤ μ‹μ¤ν…μ CRUD/λ€μ‹λ³΄λ“ ν¨ν„΄

## ν•µμ‹¬ κΈ°λ¥ μ •μ (MVP)

### 1. κ±°λλ‚΄μ—­ κ΄€λ¦¬ μ‹μ¤ν… (CRUD)

#### 1.1 κ±°λ λ°μ΄ν„° κµ¬μ΅°
```sql
CREATE TABLE IF NOT EXISTS expenses (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    transaction_type VARCHAR(10) NOT NULL CHECK (transaction_type IN ('μμ…', 'μ§€μ¶')),
    amount NUMERIC NOT NULL,
    category VARCHAR(50) NOT NULL,          -- λ€λ¶„λ¥
    subcategory VARCHAR(50) NOT NULL,       -- μ†λ¶„λ¥
    description TEXT,                       -- μƒμ„Έ μ„¤λ…/λ©”λ¨
    payment_method VARCHAR(30),             -- ν„κΈ/μΉ΄λ“/κ³„μΆμ΄μ²΄/κΈ°νƒ€
    transaction_date DATE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 1.2 2λ‹¨κ³„ μΉ΄ν…κ³ λ¦¬ μ‹μ¤ν… (ν¬νΈν΄λ¦¬μ¤ ν¨ν„΄ μ¬μ‚¬μ©)
```typescript
// ν¬νΈν΄λ¦¬μ¤μ μμ‚° μΉ΄ν…κ³ λ¦¬ μ‹μ¤ν…κ³Ό λ™μΌν• κµ¬μ΅°
const expenseCategories = {
  "μƒν™λΉ„": ["μ‹λΉ„", "κµν†µλΉ„", "μλ£λΉ„", "μƒν•„ν’"],
  "μ£Όκ±°λΉ„": ["μ›”μ„Έ/κ΄€λ¦¬λΉ„", "κ³µκ³ΌκΈ", "μΈν„°λ„·", "λ³΄ν—"],
  "μ—¬κ°€λΉ„": ["μ™Έμ‹", "μ‡Όν•‘", "λ¬Έν™”μƒν™", "μ—¬ν–‰"],
  "κµμ΅λΉ„": ["λ„μ„", "κ°•μ", "μκ²©μ¦", "ν•™μ›"],
  "κΈ°νƒ€": ["κ²½μ΅°μ‚¬", "κΈ°λ¶€", "λ―Έλ¶„λ¥"]
};

const incomeCategories = {
  "κ·Όλ΅μ†λ“": ["κΈ‰μ—¬", "λ³΄λ„μ¤", "λ¶€μ—…"],
  "μ‚¬μ—…μ†λ“": ["μ‚¬μ—…μμµ", "ν”„λ¦¬λμ„"],
  "ν¬μμ†λ“": ["λ°°λ‹ΉκΈ", "μ΄μ", "ν¬μμμµ"],
  "κΈ°νƒ€μ†λ“": ["μ©λ", "μ„ λ¬Ό", "ν™κΈ‰"]
};
```

### 2. μ‹¤μ‹κ°„ λ€μ‹λ³΄λ“ (ν¬νΈν΄λ¦¬μ¤ ν¨ν„΄ ν™•μ¥)

#### 2.1 μ›”κ°„ μ”μ•½ μΉ΄λ“ (4κ°)
```typescript
// ν¬νΈν΄λ¦¬μ¤ μ”μ•½μΉ΄λ“μ™€ μ μ‚¬ν• κµ¬μ΅°
interface MonthlySummary {
  totalIncome: number;      // μ΄ μμ…
  totalExpense: number;     // μ΄ μ§€μ¶
  netAmount: number;        // μ μμ… (μμ…-μ§€μ¶)
  budgetRemaining: number;  // μμ‚° μ”μ—¬
}
```

#### 2.2 μΉ΄ν…κ³ λ¦¬λ³„ μ§€μ¶ μ°¨νΈ
- **λ„λ„› μ°¨νΈ**: μΉ΄ν…κ³ λ¦¬λ³„ μ§€μ¶ λΉ„μ¤‘ (Recharts μ¬μ‚¬μ©)
- **λ§‰λ€ μ°¨νΈ**: μΉ΄ν…κ³ λ¦¬λ³„ μ§€μ¶ κΈμ•΅ (Recharts μ¬μ‚¬μ©)
- **μ„ ν• μ°¨νΈ**: μΌλ³„/μ£Όλ³„ μ§€μ¶ νΈλ λ“

#### 2.3 κ±°λλ‚΄μ—­ ν…μ΄λΈ” (ν¬νΈν΄λ¦¬μ¤ μμ‚° ν…μ΄λΈ” ν¨ν„΄)
- **μΉ΄ν…κ³ λ¦¬λ³„ κ·Έλ£Ήν™”**: 2λ‹¨κ³„ μ¤‘μ²© κµ¬μ΅° (λ€λ¶„λ¥ > μ†λ¶„λ¥ > κ±°λλ‚΄μ—­)
- **μ •λ ¬/ν•„ν„°λ§**: λ‚ μ§, κΈμ•΅, μΉ΄ν…κ³ λ¦¬λ³„
- **CRUD κΈ°λ¥**: μμ •/μ‚­μ  λ¨λ‹¬ (ν¬νΈν΄λ¦¬μ¤μ™€ λ™μΌ)

### 3. μμ‚° κ΄€λ¦¬ μ‹μ¤ν… (ν¬νΈν΄λ¦¬μ¤ λ©ν‘ μ‹μ¤ν… μ‘μ©)

#### 3.1 μΉ΄ν…κ³ λ¦¬λ³„ μ›” μμ‚° μ„¤μ •
```sql
CREATE TABLE IF NOT EXISTS budgets (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    category VARCHAR(50) NOT NULL,
    subcategory VARCHAR(50),
    monthly_budget NUMERIC NOT NULL,
    year INTEGER NOT NULL,
    month INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, category, subcategory, year, month)
);
```

#### 3.2 μμ‚° μ§„ν–‰λ¥  ν‘μ‹ (ν¬νΈν΄λ¦¬μ¤ λ©ν‘ κ²μ΄μ§€ μ¬μ‚¬μ©)
- **μ „μ²΄ μμ‚° μ§„ν–‰λ¥ **: μ „μ²΄ μμ‚° λ€λΉ„ ν„μ¬ μ§€μ¶
- **μΉ΄ν…κ³ λ¦¬λ³„ μ§„ν–‰λ¥ **: κ° μΉ΄ν…κ³ λ¦¬λ³„ μμ‚° λ€λΉ„ μ§€μ¶
- **μ‹κ°μ  κ²½κ³ **: 80% μ΄κ³Ό μ‹ μ£Όν™©μƒ‰, 100% μ΄κ³Ό μ‹ λΉ¨κ°„μƒ‰

## κµ¬ν„ λ‹¨κ³„λ³„ κ³„ν

### Phase 1: κΈ°λ³Έ CRUD μ‹μ¤ν… (1μ£Όμ°¨)
1. **PostgreSQL μ¤ν‚¤λ§ μ„¤κ³„**: expenses, budgets ν…μ΄λΈ” μƒμ„±
2. **Flask API κµ¬ν„**: κ±°λλ‚΄μ—­ CRUD μ—”λ“ν¬μΈνΈ
3. **React κ±°λμ…λ ¥ νΌ**: ν¬νΈν΄λ¦¬μ¤ νΌ ν¨ν„΄ μ¬μ‚¬μ©
4. **κ±°λλ‚΄μ—­ ν…μ΄λΈ”**: κΈ°λ³Έ μ΅°ν/ν‘μ‹ κΈ°λ¥

### Phase 2: λ€μ‹λ³΄λ“ μ‹μ¤ν… (2μ£Όμ°¨)
1. **μ›”κ°„ μ”μ•½ μΉ΄λ“**: 4κ° μ”μ•½ λ©”νΈλ¦­ ν‘μ‹
2. **μΉ΄ν…κ³ λ¦¬λ³„ μ°¨νΈ**: λ„λ„›/λ§‰λ€μ°¨νΈ κµ¬ν„
3. **ν•„ν„°λ§ μ‹μ¤ν…**: κΈ°κ°„λ³„, μΉ΄ν…κ³ λ¦¬λ³„ ν•„ν„°
4. **2λ‹¨κ³„ μΉ΄ν…κ³ λ¦¬**: μ¤‘μ²© ν…μ΄λΈ” κµ¬μ΅° κµ¬ν„

### Phase 3: μμ‚° κ΄€λ¦¬ (3μ£Όμ°¨)
1. **μμ‚° μ„¤μ • UI**: μΉ΄ν…κ³ λ¦¬λ³„ μμ‚° μ…λ ¥
2. **μμ‚° μ§„ν–‰λ¥ **: κ²μ΄μ§€ μ°¨νΈ λ° κ²½κ³  μ‹μ¤ν…
3. **μμ‚° λ€λΉ„ λ¶„μ„**: μ΄κ³Ό/μ μ•½ ν„ν™© ν‘μ‹
4. **μ›”κ°„ μμ‚° λ¦¬ν¬νΈ**: μƒμ„Έ λ¶„μ„ νμ΄μ§€

### Phase 4: κ³ κΈ‰ κΈ°λ¥ (4μ£Όμ°¨)
1. **ν†µκ³„ & μΈμ‚¬μ΄νΈ**: μ›”λ³„/μ—°λ³„ λΉ„κµ λ¶„μ„
2. **μ§€μ¶ ν¨ν„΄ λ¶„μ„**: μ”μΌλ³„, μ‹κ°„λ€λ³„ ν†µκ³„
3. **CSV λ‚΄λ³΄λ‚΄κΈ°**: λ°μ΄ν„° export κΈ°λ¥
4. **ν¬νΈν΄λ¦¬μ¤ μ—°λ™**: κ°€μ©μκΈ κ³„μ‚° μ—°κ²°

## API μ—”λ“ν¬μΈνΈ μ„¤κ³„

### κ±°λλ‚΄μ—­ κ΄€λ¦¬
```python
# κ±°λ CRUD (ν¬νΈν΄λ¦¬μ¤ μμ‚° CRUD ν¨ν„΄κ³Ό λ™μΌ)
POST   /api/expenses          # κ±°λ μ¶”κ°€
GET    /api/expenses          # κ±°λ μ΅°ν (ν•„ν„°λ§ μ§€μ›)
PUT    /api/expenses/{id}     # κ±°λ μμ •
DELETE /api/expenses/{id}     # κ±°λ μ‚­μ 

# λ€μ‹λ³΄λ“ λ°μ΄ν„°
GET    /api/expenses/summary  # μ›”κ°„ μ”μ•½ μ •λ³΄
GET    /api/expenses/by-category  # μΉ΄ν…κ³ λ¦¬λ³„ μ§‘κ³„
GET    /api/expenses/trends   # μ§€μ¶ νΈλ λ“ λ°μ΄ν„°
```

### μμ‚° κ΄€λ¦¬
```python
POST   /api/budgets          # μμ‚° μ„¤μ •
GET    /api/budgets          # μμ‚° μ΅°ν
PUT    /api/budgets/{id}     # μμ‚° μμ •
GET    /api/budgets/progress # μμ‚° μ§„ν–‰λ¥  μ΅°ν
```

## UI/UX μ„¤κ³„ (ν¬νΈν΄λ¦¬μ¤ ν¨ν„΄ μ¤€μ)

### νμ΄μ§€ λ μ΄μ•„μ›ƒ
```
/expenses νμ΄μ§€ κµ¬μ„±
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ [μ›”κ°„ μ”μ•½μΉ΄λ“ 4κ°]                    β”‚  β† ν¬νΈν΄λ¦¬μ¤ μ”μ•½μΉ΄λ“μ™€ μ μ‚¬
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ [κ±°λμ…λ ¥νΌ] β”‚ [μΉ΄ν…κ³ λ¦¬λ³„ μ°¨νΈ]      β”‚  β† ν¬νΈν΄λ¦¬μ¤ 3μΉΈ κ·Έλ¦¬λ“ ν¨ν„΄
β”‚ [μμ‚°μ§„ν–‰λ¥ ] β”‚ [μ§€μ¶ νΈλ λ“ μ°¨νΈ]    β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ [κ±°λλ‚΄μ—­ ν…μ΄λΈ” - μΉ΄ν…κ³ λ¦¬λ³„ κ·Έλ£Ήν™”]   β”‚  β† ν¬νΈν΄λ¦¬μ¤ μ¤‘μ²© ν…μ΄λΈ”κ³Ό μ μ‚¬
β”‚ - μƒν™λΉ„                            β”‚
β”‚   - μ‹λΉ„: [κ±°λ1] [κ±°λ2] [κ±°λ3]    β”‚
β”‚   - κµν†µλΉ„: [κ±°λ4] [κ±°λ5]         β”‚
β”‚ - μ£Όκ±°λΉ„                            β”‚
β”‚   - μ›”μ„Έ/κ΄€λ¦¬λΉ„: [κ±°λ6]            β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### μ»΄ν¬λ„νΈ μ¬μ‚¬μ© κ³„ν
- `ExpenseForm` β† `EnhancedPortfolioForm` ν¨ν„΄
- `ExpenseDashboard` β† `PortfolioDashboard` ν¨ν„΄
- `ExpenseTable` β† ν¬νΈν΄λ¦¬μ¤ μμ‚° ν…μ΄λΈ” ν¨ν„΄
- `BudgetProgressCard` β† ν¬νΈν΄λ¦¬μ¤ λ©ν‘ μΉ΄λ“ ν¨ν„΄

## λ°μ΄ν„°λ² μ΄μ¤ μΈλ±μ¤ μµμ ν™”

```sql
-- μ„±λ¥ μµμ ν™”λ¥Ό μ„ν• μΈλ±μ¤
CREATE INDEX idx_expenses_user_date ON expenses(user_id, transaction_date DESC);
CREATE INDEX idx_expenses_user_category ON expenses(user_id, category, subcategory);
CREATE INDEX idx_expenses_date_type ON expenses(transaction_date, transaction_type);
CREATE INDEX idx_budgets_user_period ON budgets(user_id, year, month);
```

## λ³΄μ• λ° κ¶ν• κ΄€λ¦¬
- **μ‚¬μ©μλ³„ λ°μ΄ν„° λ¶„λ¦¬**: ν¬νΈν΄λ¦¬μ¤μ™€ λ™μΌν• user_id κΈ°λ° κ²©λ¦¬
- **API μΈμ¦**: JWT ν† ν° κΈ°λ° μΈμ¦ (κΈ°μ΅΄ μ‹μ¤ν… μ¬μ‚¬μ©)
- **λ°μ΄ν„° κ²€μ¦**: κΈμ•΅, λ‚ μ§, μΉ΄ν…κ³ λ¦¬ μ ν¨μ„± κ²€μ‚¬

## μ„±κ³µ μ§€ν‘ (KPI)
1. **κΈ°λ¥ μ™„μ„±λ„**: CRUD κΈ°λ¥ 100% μ‘λ™
2. **μ‚¬μ©μ„±**: κ±°λ μ…λ ¥ β†’ λ€μ‹λ³΄λ“ λ°μ 5μ΄ μ΄λ‚΄
3. **λ°μ΄ν„° μ •ν™•μ„±**: μμ‚° μ§„ν–‰λ¥  κ³„μ‚° μ¤μ°¨ 0%
4. **μ„±λ¥**: 1000κ±΄ κ±°λ κΈ°μ¤€ λ€μ‹λ³΄λ“ λ΅λ”© 2μ΄ μ΄λ‚΄

## κ΄€λ ¨ νμΌ μμƒ κµ¬μ΅°

### Backend μ¶”κ°€ νμΌ
```
backend/
β”β”€β”€ services/
β”‚   β””β”€β”€ expense_service.py     # κ±°λλ‚΄μ—­ λΉ„μ¦λ‹μ¤ λ΅μ§
β”β”€β”€ models/
β”‚   β”β”€β”€ expense.py            # κ±°λ λ°μ΄ν„° λ¨λΈ
β”‚   β””β”€β”€ budget.py             # μμ‚° λ°μ΄ν„° λ¨λΈ
β””β”€β”€ routes/
    β”β”€β”€ expense_routes.py     # κ±°λ API λΌμ°νΈ
    β””β”€β”€ budget_routes.py      # μμ‚° API λΌμ°νΈ
```

### Frontend μ¶”κ°€ νμΌ
```
frontend/src/app/
β”β”€β”€ expenses/
β”‚   β”β”€β”€ page.tsx              # κ°€κ³„λ¶€ λ©”μΈ νμ΄μ§€
β”‚   β””β”€β”€ components/
β”‚       β”β”€β”€ ExpenseForm.tsx   # κ±°λ μ…λ ¥ νΌ
β”‚       β”β”€β”€ ExpenseDashboard.tsx  # κ°€κ³„λ¶€ λ€μ‹λ³΄λ“
β”‚       β”β”€β”€ ExpenseTable.tsx  # κ±°λλ‚΄μ—­ ν…μ΄λΈ”
β”‚       β”β”€β”€ BudgetManager.tsx # μμ‚° κ΄€λ¦¬ μ»΄ν¬λ„νΈ
β”‚       β””β”€β”€ ExpenseCharts.tsx # μ°¨νΈ λ¨μ
```

## ν¬νΈν΄λ¦¬μ¤ μ‹μ¤ν…κ³Όμ μ—°λ™ κ³„ν
1. **μ΄ κ°€μ©μκΈ κ³„μ‚°**: ν„κΈμ„± μμ‚° - μ›” ν‰κ·  μ§€μ¶
2. **ν¬μ μ—¬λ ¥ λ¶„μ„**: κ³ μ •λΉ„ μ μ™Έ ν›„ ν¬μ κ°€λ¥ κΈμ•΅ μ‚°μ¶
3. **ν†µν•© μ¬λ¬΄ ν„ν™©**: μμ‚° + μμ…/μ§€μ¶μ„ μΆ…ν•©ν• μ¬λ¬΄ μƒνƒ λ€μ‹λ³΄λ“
4. **λ©ν‘ μ—°κ³„**: ν¬μ λ©ν‘μ™€ μ μ•½ λ©ν‘λ¥Ό μ—°κ²°ν• ν†µν•© λ©ν‘ κ΄€λ¦¬

## κµ¬ν„ μ°μ„ μμ„
1. **πΆ μ¦‰μ‹ μ‹μ‘**: κΈ°λ³Έ CRUD (κ±°λ μ…λ ¥/μ΅°ν/μμ •/μ‚­μ )
2. **π΅ 2μμ„**: μΉ΄ν…κ³ λ¦¬λ³„ λ€μ‹λ³΄λ“ (μ°¨νΈ, μ”μ•½μΉ΄λ“)
3. **π΅ 3μμ„**: μμ‚° κ΄€λ¦¬ μ‹μ¤ν… (μ„¤μ •/μ§„ν–‰λ¥  μ¶”μ )
4. **π”µ μ¥κΈ°**: κ³ κΈ‰ λ¶„μ„ λ° ν¬νΈν΄λ¦¬μ¤ μ—°λ™

---

## λ‹¤μ λ‹¨κ³„ μ•΅μ… μ•„μ΄ν…
1. PostgreSQL expenses/budgets ν…μ΄λΈ” μ„¤κ³„ λ° μƒμ„±
2. Flask expense API κΈ°λ³Έ κµ¬μ΅° κµ¬ν„
3. /expenses νμ΄μ§€ λ° κΈ°λ³Έ μ…λ ¥ νΌ μƒμ„±
4. ν¬νΈν΄λ¦¬μ¤ μ»΄ν¬λ„νΈλ¥Ό κ°€κ³„λ¶€μ©μΌλ΅ λ³µμ‚¬/μμ •

μ΄ κ³„νμ„λ” ν¬νΈν΄λ¦¬μ¤ μ‹μ¤ν…μ μ„±κ³µμ μΈ ν¨ν„΄μ„ μµλ€ν• μ¬μ‚¬μ©ν•λ©΄μ„λ„, κ°€κ³„λ¶€ κ΄€λ¦¬μ νΉμ„±μ„ λ°μν• μ°¨λ³„ν™”λ κΈ°λ¥λ“¤μ„ ν¬ν•¨ν•κ³  μμµλ‹λ‹¤.